{% extends "layouts/base_public.html" %}
{% load i18n %}

{% block title %}{% trans "Nueva contraseña" %} · Finanzas Bot{% endblock %}

{% block content %}
<div class="max-w-xl">
  <div class="rounded-3xl border border-white/10 bg-white/5 p-8">
    {% if validlink %}
      <h1 class="text-2xl font-semibold mb-2">{% trans "Crear nueva contraseña" %}</h1>
      <p class="text-slate-300 mb-6">{% trans "Ingresa tu nueva contraseña." %}</p>

      {% if form.errors %}
        <div class="mb-4 rounded-2xl border border-rose-500/30 bg-rose-500/10 px-4 py-3 text-sm text-rose-200">
          {% trans "Revisa los campos e inténtalo nuevamente." %}
        </div>
      {% endif %}

      <form method="post" class="space-y-4">
        {% csrf_token %}

        <div class="space-y-2">
          <label class="text-sm text-slate-300">{% trans "Nueva contraseña" %}</label>
          <input type="password" name="new_password1" required autocomplete="new-password"
                 class="w-full bg-slate-950/60 border border-white/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-white/20"
                 placeholder="••••••••">
        </div>

        <div class="space-y-2">
          <label class="text-sm text-slate-300">{% trans "Confirmar nueva contraseña" %}</label>
          <input type="password" name="new_password2" required autocomplete="new-password"
                 class="w-full bg-slate-950/60 border border-white/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-white/20"
                 placeholder="••••••••">
        </div>

        <button type="submit"
                class="w-full rounded-2xl px-4 py-3 bg-emerald-500/90 hover:bg-emerald-500 text-slate-950 font-semibold">
          {% trans "Guardar contraseña" %}
        </button>
      </form>
    {% else %}
      <h1 class="text-2xl font-semibold mb-2">{% trans "Enlace inválido" %}</h1>
      <p class="text-slate-300">
        {% trans "Este enlace ya expiró o no es válido. Solicita uno nuevo." %}
      </p>

      <div class="mt-6">
        <a class="underline hover:text-white" href="{% url 'accounts:password_reset' %}">
          {% trans "Solicitar nuevo enlace" %}
        </a>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}